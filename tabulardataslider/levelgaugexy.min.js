"use strict";class LevelGaugeXY{constructor(t,i,e){this.base=t,this.work=i,this._init(e)}set lenX(t){this._observer("lenX",t,t<0?0:t)&&(this.x=this.x,this._visible&&this._level())}get lenX(){return this.list.lenX}set lenY(t){this._observer("lenY",t,t<0?0:t)&&(this.y=this.y,this._visible&&this._level())}get lenY(){return this.list.lenY}_range(t,i){return t<0?t=0:t>i&&(t=i<0?0:i),t}set x(t){this._observer("x",t,this._range(t,this.list.lenX-1))&&this._visible&&this._level()}get x(){return this.list.x}set y(t){this._observer("y",t,this._range(t,this.list.lenY-1))&&this._visible&&this._level()}get y(){return this.list.y}set stepx(t){this.list.stepx=t<0?0:t}get stepx(){return this.list.stepx}set stepy(t){this.list.stepy=t<0?0:t}get stepy(){return this.list.stepy}set locationX(t){this.list.locationX="top"==t?-1:1,this.work.style.top=this.list.locationX<0?"":"0px",this.work.style.bottom=this.list.locationX<0?"0px":"",this._visible&&(this._strip(),this._level())}get locationX(){return this.list.locationX>0?"bottom":"top"}set locationY(t){this.list.locationY="left"==t?-1:1,this.work.style.left=this.list.locationY<0?"":"0px",this.work.style.right=this.list.locationY<0?"0px":"",this._visible&&(this._strip(),this._level())}get locationY(){return this.list.locationY>0?"right":"left"}set dependX(t){this.list.dependX="inverse"==t?1:0,this._visible&&this._level()}get dependX(){return this.list.dependX?"inverse":"directly"}set dependY(t){this.list.dependY="inverse"==t?1:0,this._visible&&this._level()}get dependY(){return this.list.dependY?"inverse":"directly"}set colorXY(t){this.list.colorXY="none"==t?"":t.replace(/[rgba()]/g,""),this._visible&&this._strip()}get colorXY(){return this.list.colorXY?"rgba("+this.list.colorXY+")":"none"}set colorLevel(t){this.list.colorLevel=t.replace(/[rgba()]/g,""),this._visible&&this._level()}get colorLevel(){return"rgba("+this.list.colorLevel+")"}visible(){this._visible=!0,this._saveOffset(),this._strip(),this._level()}hidden(){this._visible=!1}resize(){this._resize(this)}_observer(t,i,e){let s=this.list[t];if(this.list[t]=e,i==s&&i==e)return!1;let l=new CustomEvent("levelgaugexy",{detail:{base:this.base.id,work:this.work.id,[t]:{value:i,old:s,new:e}},bubbles:!0,cancelable:!1});return this.base.dispatchEvent(l),e!==s}_saveOffset(){this.bHeight=this.base.clientHeight,this.bWidth=this.base.clientWidth,this.wWidth=this.work.offsetWidth,this.wHeight=this.work.offsetHeight,this.widthX=this.bHeight-this.wHeight,this.widthY=this.bWidth-this.wWidth}_strip(){if(this.list.colorXY){let t=0==this.widthX?this.widthY:0==this.widthY?this.widthX:Math.min(this.widthX,this.widthY);this.base.style.boxShadow="rgba("+this.list.colorXY+") "+-this.list.locationY+"px "+-this.list.locationX+"px 1px , rgba("+this.list.colorXY+") "+-.75*this.list.locationY*this.widthY+"px "+-.75*this.list.locationX*this.widthX+"px "+t+"px inset"}}_level(){let t=Math.max(this.widthX,this.widthY),i=this.list.dependX?this.list.x+1:this.list.lenX-this.list.x-1,e=this.list.dependY?this.list.y+1:this.list.lenY-this.list.y-1,s=this.list.lenX?i==this.list.lenX?this.wWidth:Math.ceil(i*this.wWidth/this.list.lenX):0,l=this.list.lenY?e==this.list.lenY?this.wHeight:Math.ceil(e*this.wHeight/this.list.lenY):0;this.work.style.boxShadow="rgba("+this.list.colorLevel+") "+.5*this.list.locationY+"px "+.5*this.list.locationX+"px 1px 0px , rgba("+this.list.colorLevel+") "+this.list.locationY*this.wWidth+"px "+this.list.locationX*this.wHeight+"px 0px 0px ,rgba("+this.list.colorLevel+") "+this.list.locationY*(t+s)+"px "+this.list.locationX*(t+l)+"px 0px "+t+"px "}_resize(t){t.bWidth===t.base.offsetWidth&&t.bHeight===t.base.offsetHeight&&t.wWidth===t.work.offsetWidth&&t.wHeight===t.work.offsetHeight||(this._saveOffset(),this._strip(),this._level())}_wheel(t,i){if(t.ctrlKey||t.altKey)return;let e=t.deltaY>0?1:-1;t.shiftKey?i.x+=e*i.stepx:i.y+=e*i.stepy,t.preventDefault()}_click(t,i){let e=Math.round(t.pageX-pageXOffset),s=Math.round(t.pageY-pageYOffset),l={},h=i.work.getBoundingClientRect();["top","bottom","left","right","width","height"].forEach(t=>{l[t]=Math.round(h[t])}),--l.bottom,--l.right;let o="bottom"==i.locationX,n="right"==i.locationY;if(t.preventDefault(),(o?s>l.bottom&&s<=l.bottom+i.widthX:s>=l.top-i.widthX&&s<l.top)&&e>=l.left&&e<=l.right){let t=e==l.left?0:e==l.right?i.lenX:Math.ceil((e-l.left)*i.lenX/l.width);i.x=(n?"inverse"==i.dependX:"directly"==i.dependX)?t-1:i.lenX-t}if((n?e>l.right&&e<=l.right+i.widthY:e>=l.left-i.widthY&&e<l.left)&&s>=l.top&&s<=l.bottom){let t=s==l.top?0:s==l.bottom?i.lenY:Math.ceil((s-l.top)*i.lenY/l.height);i.y=(o?"inverse"==i.dependY:"directly"==i.dependY)?t-1:i.lenY-t}}destroy(){this.base.style.position="",this.base.style.overflow="",this.base.style.boxShadow="",this.work.style.position="",this.work.style.boxShadow="",this.work.style.top="",this.work.style.bottom="",this.work.style.left="",this.work.style.right="",window.removeEventListener("resize",this._resizeEvent,!1),this.base.removeEventListener("wheel",this._wheelEvent,{passive:!1}),this.base.removeEventListener("mousedown",this._clickEvent,!1),this.base.lgxy.__proto__&&(this.base.lgxy.__proto__=null),delete this.base.lgxy}_init(t){let i=window.getComputedStyle(this.base);"static"==i.position&&(this.base.style.position="relative"),"hidden"!==i.overflow&&(this.base.style.overflow="hidden"),this.work.style.position="absolute",this.list={lenX:0,lenY:0,x:0,y:0,stepx:1,stepy:1,dependX:1,dependY:1,locationX:1,locationY:1,colorXY:"200,200,200,0.9",colorLevel:"100,100,100,0.3"},this.hidden(),this.locationX="bottom",this.locationY="right";for(let i in t)i in this.list&&(["lenX","lenY","x","y","stepx","stepy"].includes(i)?+t[i]&&(this[i]=+t[i]):"string"==typeof t[i]&&(this[i]=t[i].split(" ").join("")));let e=this;window.addEventListener("resize",this._resizeEvent=function(){e._resize(e)},!1),this.base.addEventListener("wheel",this._wheelEvent=function(t){e._wheel(t,e)},{passive:!1}),this.base.addEventListener("mousedown",this._clickEvent=function(t){e._click(t,e)},!1),this.visible()}}function levelGaugeXY(t,i,e={}){let s,l;(s="object"==typeof t?t:document.getElementById(t))&&(l="object"==typeof i?i:document.getElementById(i))&&(s.lgxy=new LevelGaugeXY(s,l,e))}